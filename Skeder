-- Custom UI Library Module with UIGridLayout
local Library = {}

function Library:NewWindow(title)
    -- Create the window frame
    local Window = Instance.new("Frame")
    Window.Size = UDim2.new(0.3, 0, 0.4, 0)
    Window.Position = UDim2.new(0.35, 0, 0.3, 0)
    Window.BackgroundColor3 = Color3.fromRGB(40, 40, 40)

    -- Create a title for the window
    local Title = Instance.new("TextLabel")
    Title.Text = title
    Title.Size = UDim2.new(1, 0, 0.1, 0)
    Title.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.Parent = Window

    -- Parent the window to the ScreenGui
    Window.Parent = game.Players.LocalPlayer.PlayerGui:WaitForChild("ScreenGui")
    
    return Window
end

function Library:NewSection(Window, sectionTitle)
    -- Create a section for the window
    local Section = Instance.new("Frame")
    Section.Size = UDim2.new(1, 0, 0.5, 0)
    Section.Position = UDim2.new(0, 0, 0.1, 0)
    Section.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

    -- Create a title for the section
    local SectionTitle = Instance.new("TextLabel")
    SectionTitle.Text = sectionTitle
    SectionTitle.Size = UDim2.new(1, 0, 0.1, 0)
    SectionTitle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    SectionTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    SectionTitle.Parent = Section

    -- Create a UIGridLayout for the section to automatically arrange buttons/textboxes
    local GridLayout = Instance.new("UIGridLayout")
    GridLayout.CellSize = UDim2.new(0.9, 0, 0.1, 0)
    GridLayout.CellPadding = UDim2.new(0, 0, 0, 5)
    GridLayout.Parent = Section

    -- Parent the section to the window
    Section.Parent = Window

    return Section
end

function Library:CreateButton(Section, buttonText, callback)
    -- Create a button inside the section
    local Button = Instance.new("TextButton")
    Button.Size = UDim2.new(1, 0, 0.1, 0)
    Button.Text = buttonText
    Button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.Parent = Section

    -- Button click event
    Button.MouseButton1Click:Connect(function()
        callback()
    end)
end

function Library:CreateTextbox(Section, placeholderText, callback)
    -- Create a textbox inside the section
    local TextBox = Instance.new("TextBox")
    TextBox.Size = UDim2.new(1, 0, 0.1, 0)
    TextBox.PlaceholderText = placeholderText
    TextBox.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    TextBox.Parent = Section

    -- Textbox focus lost event
    TextBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            callback(TextBox.Text)
        end
    end)
end

return Library
